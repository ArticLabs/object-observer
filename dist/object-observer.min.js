!function(a){"use strict";function b(a){var b;return b=Array.isArray(a)?a.slice():Object.assign({},a)}function c(a,c,d){var e,g;n.has(a)||a.forEach(function(h,i){h&&"object"==typeof h&&(e=d.concat(i),g=b(h),a[i]=f(g,c,e).proxy)})}function d(a,c,d){var e,g;n.has(a)||Reflect.ownKeys(a).forEach(function(h){a[h]&&"object"==typeof a[h]&&(e=d.concat(h),g=b(a[h]),a[h]=f(g,c,e).proxy)})}function e(a){Reflect.ownKeys(a).forEach(function(b){var c=a[b];c&&"object"==typeof c&&e(c)}),n.has(a)?(console.dir(a),n.get(a).revoke(),n.delete(a)):console.warn("did not found map for")}function f(a,b,e){function g(a,d){var g;return g="pop"===d?function(){var c,f,g;return c=a.length-1,b.preventCallbacks=!0,f=Reflect.apply(a[d],a,arguments),b.preventCallbacks=!1,g=[new j(e.concat(c),f)],m(b.callbacks,g),f}:"push"===d?function(){var f,g=[];b.preventCallbacks=!0,f=Reflect.apply(a[d],a,arguments),c(a,b,e),b.preventCallbacks=!1;for(var i=arguments.length;i>0;i--)g.push(new h(e.concat(f-i),a[f-i]));return m(b.callbacks,g),f}:"shift"===d?function(){var f,g;return b.preventCallbacks=!0,f=Reflect.apply(a[d],a,arguments),c(a,b,e),b.preventCallbacks=!1,g=[new j(e.concat(0),f)],m(b.callbacks,g),f}:"unshift"===d?function(){var g,i,j=[],k=[];return Array.from(arguments).forEach(function(a,c){var d;a&&"object"==typeof a?(i=f(a,b,e.concat(c)),d=i.proxy):d=a,j.push(d)}),j.forEach(function(a,b){k.push(new h(e.concat(b),a))}),g=Reflect.apply(a[d],a,j),c(a,b,e),m(b.callbacks,k),g}:"reverse"===d?function(){var f,g=[];return b.preventCallbacks=!0,f=Reflect.apply(a[d],a,arguments),c(a,b,e),b.preventCallbacks=!1,g.push(new k),m(b.callbacks,g),f}:"sort"===d?function(){var f,g=[];return b.preventCallbacks=!0,f=Reflect.apply(a[d],a,arguments),c(a,b,e),b.preventCallbacks=!1,g.push(new l),m(b.callbacks,g),f}:"fill"===d?function(){var f,g,j,k,l=[];g=arguments.length<2?0:arguments[1]<0?a.length+arguments[1]:arguments[1],j=arguments.length<3?a.length:arguments[2]<0?a.length+arguments[2]:arguments[2],k=a.slice(g,j),b.preventCallbacks=!0,f=Reflect.apply(a[d],a,arguments),c(a,b,e),b.preventCallbacks=!1;for(var n=g;n<j;n++)a.hasOwnProperty(n-g)?l.push(new i(e.concat(n),a[n],k[n-g])):l.push(new h(e.concat(n),a[n]));return m(b.callbacks,l),f}:"splice"===d?function(){var f,g,k,l,n,o=[];for(b.preventCallbacks=!0,g=0===arguments.length?0:arguments[0]<0?a.length+arguments[0]:arguments[0],k=arguments.length<2?a.length-g:arguments[1],l=Math.max(arguments.length-2,0),n=Reflect.apply(a[d],a,arguments),c(a,b,e),b.preventCallbacks=!1,f=0;f<k;f++)f<l?o.push(new i(e.concat(g+f),a[g+f],n[f])):o.push(new j(e.concat(g+f),n[f]));for(;f<l;f++)o.push(new h(e.concat(g+f),a[g+f]));return m(b.callbacks,o),n}:Reflect.get(a,d)}function p(a,c,d){var g,j,k,l=a.hasOwnProperty(c),p=a[c],q=Array.isArray(b.eventsCollector)?b.eventsCollector:[];return j=Reflect.set(a,c,d),b.callbacks.length&&j&&d!==p&&(k=e.concat(c),"object"==typeof p&&p&&(o.has(p)&&o.delete(p),n.has(p)&&(n.get(p).revoke(),n.delete(p))),"object"==typeof d&&d&&(g=f(d,b,k),a[c]=g.proxy),l?q.push(new i(k,d,p)):q.push(new h(k,d)),b.preventCallbacks||m(b.callbacks,q)),j}function q(a,c){var d,f,g=a[c],h=Array.isArray(b.eventsCollector)?b.eventsCollector:[];return d=Reflect.deleteProperty(a,c),b.callbacks.length&&d&&("object"==typeof g&&g&&o.has(g)&&o.delete(g),f=e.concat(c),h.push(new j(f,g)),b.preventCallbacks||m(b.callbacks,h)),d}var r;if(o.has(a)){var s=a;a=o.get(a),o.delete(s)}return Array.isArray(a)?(c(a,b,e),r=Proxy.revocable(a,{set:p,get:g,deleteProperty:q})):(d(a,b,e),r=Proxy.revocable(a,{set:p,deleteProperty:q})),n.set(r.proxy,r),o.set(r,a),r}function g(a){function c(a){if(j)throw new TypeError("revoked Observable MAY NOT be observed anymore");if("function"!=typeof a)throw new Error("observer (callback) parameter MUST be a function");k.indexOf(a)<0?k.push(a):console.info("observer (callback) may be bound to an observable only once")}function d(){if(j)throw new TypeError("revoked Observable MAY NOT be unobserved amymore");arguments.length?Array.from(arguments).forEach(function(a){var b=k.indexOf(a);b>=0&&k.splice(b,1)}):k.splice(0,k.length)}function g(){j?console.log("revokation of Observable have an effect only once"):(j=!0,e(h))}var h,i,j=!1,k=[],l=!1;h=f(b(a),this,[]).proxy,Reflect.defineProperty(h,"observe",{value:c}),Reflect.defineProperty(h,"unobserve",{value:d}),Reflect.defineProperty(h,"revoke",{value:g}),Reflect.defineProperty(this,"callbacks",{get:function(){return k.slice()}}),Reflect.defineProperty(this,"eventsCollector",{value:i,writable:!0}),Reflect.defineProperty(this,"preventCallbacks",{value:l,writable:!0}),Reflect.defineProperty(this,"proxy",{value:h})}function h(a,b){Reflect.defineProperty(this,"type",{value:"insert"}),Reflect.defineProperty(this,"path",{value:a}),Reflect.defineProperty(this,"value",{value:b})}function i(a,b,c){Reflect.defineProperty(this,"type",{value:"update"}),Reflect.defineProperty(this,"path",{value:a}),Reflect.defineProperty(this,"value",{value:b}),Reflect.defineProperty(this,"oldValue",{value:c})}function j(a,b){Reflect.defineProperty(this,"type",{value:"delete"}),Reflect.defineProperty(this,"path",{value:a}),Reflect.defineProperty(this,"oldValue",{value:b})}function k(){Reflect.defineProperty(this,"type",{value:"reverse"})}function l(){Reflect.defineProperty(this,"type",{value:"shuffle"})}function m(a,b){for(var c=0;c<a.length;c++)try{a[c](b)}catch(a){console.error(a)}}var n=new WeakMap,o=new WeakMap;Reflect.defineProperty(g,"from",{value:function(a){if(!a||"object"!=typeof a)throw new Error("observable MAY ONLY be created from non-null object only");if("observe"in a||"unobserve"in a||"revoke"in a)throw new Error('target object MUST NOT have nor own neither inherited properties from the following list: "observe", "unobserve", "revoke"');var b=new g(a);return b.proxy}}),Reflect.defineProperty(a,"Observable",{value:g})}(this);