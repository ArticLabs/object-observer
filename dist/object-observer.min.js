(()=>{"use strict";function e(e){return y.indexOf(e.constructor.name)>=0}function t(e,t){let o,r=p.get(e),l=u.get(r.root);return o="pop"===t?function(){let o,n,i,f;return o=e.length-1,n=Reflect.apply(e[t],e,arguments),(i=s.get(n))&&p.get(i).revoke(),f=[new a(r.path.concat(o),i||n)],l.notify(f),i||n}:"push"===t?function(){let o,f,a,c=[];o=Array.from(arguments),a=e.length;for(let e,t=0,l=o.length;t<l;t++)(e=o[t])&&"object"==typeof e&&(o[t]=new n(e,a+t,r).proxy),c.push(new i(r.path.concat(a+t),e));return f=Reflect.apply(e[t],e,o),l.notify(c),f}:"shift"===t?function(){let o,n,i;o=Reflect.apply(e[t],e,arguments),(i=s.get(o))&&p.get(i).revoke();for(let t,o,r=0,n=e.length;r<n;r++)(t=e[r])&&"object"==typeof t&&((o=p.get(s.get(t)))?o.ownKey=r:console.error("unexpectedly failed to resolve proxy -> target -> observed"));return n=[new a(r.path.concat(0),i||o)],l.notify(n),i||o}:"unshift"===t?function(){let o,f,a,c=[];(o=Array.from(arguments)).forEach(function(e,t){e&&"object"==typeof e&&(o[t]=new n(e,t,r).proxy)}),f=Reflect.apply(e[t],e,o);for(let t,o=0,r=e.length;o<r;o++)(t=e[o])&&"object"==typeof t&&((a=p.get(s.get(t)))?a.ownKey=o:console.error("failed to resolve proxy -> target -> observed"));for(let t=0,n=o.length;t<n;t++)c.push(new i(r.path.concat(t),e[t]));return l.notify(c),f}:"reverse"===t?function(){let o,r;Reflect.apply(e[t],e,arguments);for(let t,o=0,n=e.length;o<n;o++)(t=e[o])&&"object"==typeof t&&((r=p.get(s.get(t)))?r.ownKey=o:console.error("failed to resolve proxy -> target -> observed"));return o=[new function(){Object.defineProperties(this,{type:{value:"reverse"}})}],l.notify(o),this}:"sort"===t?function(){let o,r;Reflect.apply(e[t],e,arguments);for(let t,o=0,n=e.length;o<n;o++)(t=e[o])&&"object"==typeof t&&((r=p.get(s.get(t)))?r.ownKey=o:console.error("failed to resolve proxy -> target -> observed"));return o=[new function(){Object.defineProperties(this,{type:{value:"shuffle"}})}],l.notify(o),this}:"fill"===t?function(){let o,a,c,u=[],y=arguments.length,h=e.length;o=y<2?0:arguments[1]<0?h+arguments[1]:arguments[1],a=y<3?h:arguments[2]<0?h+arguments[2]:arguments[2],c=e.slice(),Reflect.apply(e[t],e,arguments);for(let t,l,y=o;y<a;y++)(t=e[y])&&"object"==typeof t&&(e[y]=new n(t,y,r).proxy),c.hasOwnProperty(y)?((l=s.get(c[y]))&&p.get(l).revoke(),u.push(new f(r.path.concat(y),e[y],l||c[y]))):u.push(new i(r.path.concat(y),e[y]));return l.notify(u),this}:"splice"===t?function(){let o,c,u,y,h,b,v,g=[],w=e.length;v=(o=Array.from(arguments)).length;for(let e,t=0;t<v;t++)e=o[t],t>1&&e&&"object"==typeof e&&(o[t]=new n(e,t,r).proxy);y=0===v?0:o[0]<0?w+o[0]:o[0],h=v<2?w-y:o[1],b=Math.max(v-2,0),c=Reflect.apply(e[t],e,o);for(let t,o=0;o<w;o++)(t=e[o])&&"object"==typeof t&&((u=p.get(s.get(t)))?u.ownKey=o:console.error("failed to resolve proxy -> target -> observed"));for(let e,t,o=0,r=c.length;o<r;o++)e=c[o],(t=s.get(e))&&(p.get(t).revoke(),c[o]=t);let d;for(d=0;d<h;d++)d<b?g.push(new f(r.path.concat(y+d),e[y+d],c[d])):g.push(new a(r.path.concat(y+d),c[d]));for(;d<b;d++)g.push(new i(r.path.concat(y+d),e[y+d]));return l.notify(g),c}:Reflect.get(e,t)}function o(t,o,r){let l,a,c=t.hasOwnProperty(o),y=t[o],h=p.get(t),b=u.get(h.root);if((l=r&&"object"==typeof r&&!e(r)?Reflect.set(t,o,new n(r,o,h).proxy):Reflect.set(t,o,r))&&((a=s.get(y))&&p.get(a).revoke(),b.hasListeners)){let e=h.path.concat(o),t=[c?new f(e,r,a||y):new i(e,r)];h.preventCallbacks||b.notify(t)}return l}function r(e,t){let o,r,n=e[t],l=p.get(e),i=u.get(l.root);if((o=Reflect.deleteProperty(e,t))&&((r=s.get(n))&&p.get(r).revoke(),i.hasListeners)){let e=[new a(l.path.concat(t),r||n)];l.preventCallbacks||i.notify(e)}return o}function n(l,i,f){let a,c,u;if(!l||"object"!=typeof l)throw new Error("Observed MUST be created from a non null object origin");if(f&&(void 0===i||null===i))throw new Error("any non-root (parent-less) Observed MUST have an own path; now parent is "+f+"; key is "+i);if(f&&!(f instanceof n))throw new Error("parent, when supplied, MUST be an instance of Observed");a=function(e){return Array.isArray(e)?e.slice():Object.assign(new e.constructor,e)}(l),Array.isArray(a)?(!function(t,o){for(let r,l=0,i=t.length;l<i;l++)(r=t[l])&&"object"==typeof r&&!e(r)&&(t[l]=new n(r,l,o).proxy)}(a,this),c=Proxy.revocable(a,{set:o,get:t,deleteProperty:r})):(!function(t,o){let r=Object.keys(t);for(let l,i,f=0,a=r.length;f<a;f++)(i=t[l=r[f]])&&"object"==typeof i&&!e(i)&&(t[l]=new n(i,l,o).proxy)}(a,this),c=Proxy.revocable(a,{set:o,deleteProperty:r})),u=c.proxy,p.set(a,this),s.set(u,a),Object.defineProperties(this,{revokable:{value:c},proxy:{value:u},parent:{value:f},ownKey:{value:i,writable:!0}})}function l(e){let t=!1,o=[];Object.defineProperties(e.proxy,{observe:{value:function(e){if(t)throw new TypeError("revoked Observable MAY NOT be observed anymore");if("function"!=typeof e)throw new Error("observer (callback) parameter MUST be a function");o.indexOf(e)<0?o.push(e):console.info("observer (callback) may be bound to an observable only once")}},unobserve:{value:function(){if(t)throw new TypeError("revoked Observable MAY NOT be unobserved anymore");if(arguments.length)for(let e,t=0,r=arguments.length;t<r;t++)(e=o.indexOf(arguments[t]))>=0&&o.splice(e,1);else o.splice(0,o.length)}},revoke:{value:function(){t?console.log("revoking of Observable effective only once"):(t=!0,e.revoke())}}}),Object.defineProperties(this,{hasListeners:{value:function(){return o.length>0}},notify:{value:function(e){for(let t,r=0,n=o.length;r<n;r++){t=o[r];try{t(e)}catch(e){console.error("one/some of the observing callbacks failed with ",e)}}}}})}function i(e,t){Object.defineProperties(this,{type:{value:"insert"},path:{value:e},value:{value:t}})}function f(e,t,o){Object.defineProperties(this,{type:{value:"update"},path:{value:e},value:{value:t},oldValue:{value:o}})}function a(e,t){Object.defineProperties(this,{type:{value:"delete"},path:{value:e},oldValue:{value:t}})}const c=this||window,s=new Map,p=new Map,u=new Map,y=["Date","Blob","Number","String","Boolean","Error","SyntaxError","TypeError","URIError","Function","Promise","RegExp"];Object.defineProperty(n.prototype,"root",{get:function(){let e=this;for(;e.parent;)e=e.parent;return e}}),Object.defineProperty(n.prototype,"path",{get:function(){let e=[],t=this;for(;void 0!==t.ownKey;)e.unshift(t.ownKey),t=t.parent;return e}}),Object.defineProperty(n.prototype,"revoke",{value:function(){let e=s.get(this.proxy),t=Object.keys(e);this.revokable.revoke();for(let o,r,n=0,l=t.length;n<l;n++)o=t[n],(r=s.get(e[o]))&&(e[o]=p.get(r).revoke());return s.delete(this.proxy),p.delete(e),e}}),Object.defineProperty(l,"from",{value:function(t){if(!t||"object"!=typeof t)throw new Error("observable MAY ONLY be created from non-null object only");if("observe"in t||"unobserve"in t||"revoke"in t)throw new Error('target object MUST NOT have nor own neither inherited properties from the following list: "observe", "unobserve", "revoke"');if(e(t))throw new Error(t+" found to be one of non-observable object types: "+y);let o=new n(t),r=new l(o);return u.set(o,r),o.proxy}}),Object.defineProperty(c,"Observable",{value:l})})();