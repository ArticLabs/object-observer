!function(a){"use strict";function b(a){var b;return b=Array.isArray(a)?a.slice():Object.assign({},a)}function c(a,b){var c,d=r.get(a),e=s.get(d.root);return c="pop"===b?function(){var c,f,g;return c=a.length-1,f=Reflect.apply(a[b],a,arguments),g=[new l(d.path.concat(c),f)],o(e.callbacks,g),f}:"push"===b?function(){var c,f,g=[];f=a.length;for(var i=0;i<arguments.length;i++)arguments[i]&&"object"==typeof arguments[i]&&(arguments[i]=new h(arguments[i],f+i,d).proxy),g.push(new j(d.path.concat(f+i),arguments[i]));return c=Reflect.apply(a[b],a,arguments),o(e.callbacks,g),c}:"shift"===b?function(){var c,g;return e.preventCallbacks=!0,c=Reflect.apply(a[b],a,arguments),f(a,d),e.preventCallbacks=!1,g=[new l(d.path.concat(0),c)],o(e.callbacks,g),c}:"unshift"===b?function(){var c,g=[],i=[];return Array.from(arguments).forEach(function(a,b){var c;c=a&&"object"==typeof a?new h(a,b,d).proxy:a,g.push(c)}),g.forEach(function(a,b){i.push(new j(d.path.concat(b),a))}),c=Reflect.apply(a[b],a,g),f(a,d),o(e.callbacks,i),c}:"reverse"===b?function(){var c,g=[];return e.preventCallbacks=!0,c=Reflect.apply(a[b],a,arguments),f(a,d),e.preventCallbacks=!1,g.push(new m),o(e.callbacks,g),c}:"sort"===b?function(){var c,g=[];return e.preventCallbacks=!0,c=Reflect.apply(a[b],a,arguments),f(a,d),e.preventCallbacks=!1,g.push(new n),o(e.callbacks,g),c}:"fill"===b?function(){var c,g,h,i,l=[];g=arguments.length<2?0:arguments[1]<0?a.length+arguments[1]:arguments[1],h=arguments.length<3?a.length:arguments[2]<0?a.length+arguments[2]:arguments[2],i=a.slice(g,h),e.preventCallbacks=!0,c=Reflect.apply(a[b],a,arguments),f(a,d),e.preventCallbacks=!1;for(var m=g;m<h;m++)a.hasOwnProperty(m-g)?l.push(new k(d.path.concat(m),a[m],i[m-g])):l.push(new j(d.path.concat(m),a[m]));return o(e.callbacks,l),c}:"splice"===b?function(){var c,g,h,i,m,n=[];for(e.preventCallbacks=!0,g=0===arguments.length?0:arguments[0]<0?a.length+arguments[0]:arguments[0],h=arguments.length<2?a.length-g:arguments[1],i=Math.max(arguments.length-2,0),m=Reflect.apply(a[b],a,arguments),f(a,d),e.preventCallbacks=!1,c=0;c<h;c++)c<i?n.push(new k(d.path.concat(g+c),a[g+c],m[c])):n.push(new l(d.path.concat(g+c),m[c]));for(;c<i;c++)n.push(new j(d.path.concat(g+c),a[g+c]));return o(e.callbacks,n),m}:Reflect.get(a,b)}function d(a,b,c){var d,e,f=a.hasOwnProperty(b),g=a[b],i=r.get(a),l=s.get(i.root),m=Array.isArray(i.eventsCollector)?i.eventsCollector:[];return d=Reflect.set(a,b,c),l.callbacks.length&&d&&c!==g&&(e=i.path.concat(b),"object"==typeof g&&g&&(q.has(g)&&q.delete(g),p.has(g)&&(p.get(g).revoke(),p.delete(g))),"object"==typeof c&&c&&(a[b]=new h(c,b,i).proxy),f?m.push(new k(e,c,g)):m.push(new j(e,c)),i.preventCallbacks||o(l.callbacks,m)),d}function e(a,b){var c,d,e=a[b],f=r.get(a),g=s.get(f.root),h=Array.isArray(f.eventsCollector)?f.eventsCollector:[];return c=Reflect.deleteProperty(a,b),g.callbacks.length&&c&&("object"==typeof e&&e&&q.has(e)&&q.delete(e),d=f.path.concat(b),h.push(new l(d,e)),f.preventCallbacks||o(g.callbacks,h)),c}function f(a,b){a.forEach(function(c,d){c&&"object"==typeof c&&(a[d]=new h(c,d,b).proxy)})}function g(a,b){Reflect.ownKeys(a).forEach(function(c){a[c]&&"object"==typeof a[c]&&(a[c]=new h(a[c],c,b).proxy)})}function h(a,i,j){var k,l;if(!a||"object"!=typeof a)throw new Error("Observed MUST be created from a non null object origin");if(j&&("undefined"==typeof i||null===i))throw new Error("any non-root (parent-less) Observed MUST have an own path; now parent is "+j+"; key is "+i);if(j&&!(j instanceof h))throw new Error("parent, when supplied, MUST be an instance of Observed");k=b(a),Array.isArray(k)?(f(k,this),l=Proxy.revocable(k,{set:d,get:c,deleteProperty:e})):(g(k,this),l=Proxy.revocable(k,{set:d,deleteProperty:e})),r.set(k,this),Reflect.defineProperty(this,"proxy",{value:l.proxy}),Reflect.defineProperty(this,"parent",{value:j}),Reflect.defineProperty(this,"ownKey",{value:i})}function i(a){function b(a){if(f)throw new TypeError("revoked Observable MAY NOT be observed anymore");if("function"!=typeof a)throw new Error("observer (callback) parameter MUST be a function");g.indexOf(a)<0?g.push(a):console.info("observer (callback) may be bound to an observable only once")}function c(){if(f)throw new TypeError("revoked Observable MAY NOT be unobserved amymore");arguments.length?Array.from(arguments).forEach(function(a){var b=g.indexOf(a);b>=0&&g.splice(b,1)}):g.splice(0,g.length)}function d(){}var e,f=!1,g=[];s.set(a,this),Reflect.defineProperty(this,"observe",{value:b}),Reflect.defineProperty(this,"unobserve",{value:c}),Reflect.defineProperty(this,"revoke",{value:d}),Reflect.defineProperty(this,"callbacks",{value:g}),Reflect.defineProperty(this,"eventsCollector",{value:e,writable:!0})}function j(a,b){Reflect.defineProperty(this,"type",{value:"insert"}),Reflect.defineProperty(this,"path",{value:a}),Reflect.defineProperty(this,"value",{value:b})}function k(a,b,c){Reflect.defineProperty(this,"type",{value:"update"}),Reflect.defineProperty(this,"path",{value:a}),Reflect.defineProperty(this,"value",{value:b}),Reflect.defineProperty(this,"oldValue",{value:c})}function l(a,b){Reflect.defineProperty(this,"type",{value:"delete"}),Reflect.defineProperty(this,"path",{value:a}),Reflect.defineProperty(this,"oldValue",{value:b})}function m(){Reflect.defineProperty(this,"type",{value:"reverse"})}function n(){Reflect.defineProperty(this,"type",{value:"shuffle"})}function o(a,b){for(var c=0;c<a.length;c++)try{a[c](b)}catch(a){console.error(a)}}var p=new WeakMap,q=new WeakMap,r=new WeakMap,s=new WeakMap;Reflect.defineProperty(h.prototype,"root",{get:function(){for(var a=this;a.parent;)a=a.parent;return a}}),Reflect.defineProperty(h.prototype,"path",{get:function(){for(var a=[],b=this;"undefined"!=typeof b.ownKey;)a.push(b.ownKey),b=b.parent;return a.reverse()}}),i.prototype=Object.create(h.prototype),i.prototype.constructor=i,Reflect.defineProperty(i,"from",{value:function(a){if(!a||"object"!=typeof a)throw new Error("observable MAY ONLY be created from non-null object only");if("observe"in a||"unobserve"in a||"revoke"in a)throw new Error('target object MUST NOT have nor own neither inherited properties from the following list: "observe", "unobserve", "revoke"');var b=new h(a);return i.call(b.proxy,b),b.proxy}}),Reflect.defineProperty(a,"Observable",{value:i})}(this);